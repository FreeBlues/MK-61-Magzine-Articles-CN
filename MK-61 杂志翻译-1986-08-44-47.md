#	孤独者与机器人

[原文链接](http://epizodyspace.ru/bibl/tehnika_-_molodyoji/1986/8/44-47.html)

![](http://epizodyspace.ru/bibl/tehnika_-_molodyoji/1986/5/50.jpg)

“巨大的抓取器正在接近……它们遮住了整个天空……在‘康提基’号飞船的外壳上合拢……突然……（《TM》1985年第11期）毫无疑问，我们的许多读者冒险穿着轻型太空服，背后装着微型火箭发动机，完成了绕行‘南站’的任务，他们自己的苦涩经验使他们确信，守卫空间站免受‘不速之客’侵扰的机械怪兽的恶劣脾气。

那些对我们不太礼貌的自动装置的结构感兴趣的人，错误地被M. Korshunov当作‘系泊操纵器’，可以在‘算法体操’部分详细了解它。

借此机会提醒一下，众所周知，苏联轨道站‘和平号’是历史上第一个装备了真正的系泊操纵器的空间站。正如读者们记得的，‘南站’的守卫并不是唯一一个与勇敢的旅行者进行决斗的机器人。

在此之前有一个咖啡机‘单臂强盗’，之后是‘机器人官僚’，在与它的争吵中，A. Perepelkin无意中为即将到来的胜利奠定了基础。

但有些读者，特别是来自刻赤的G. Gorovyov，有充分的理由怀疑，在整个英勇的飞行过程中，‘康提基’号的驾驶舱内隐秘地存在着第三个参与者——机载计算机。

不可能 A. Perepelkin和M. Korshunov没有不断地与之战斗。

当然，是在我们喜爱的电子游戏领域。必须诚实地说：事实就是这样。在‘自由点—地球’段以及洪水过后，当我们的英雄们有大量空闲时间时，观察到最严重的沉迷于赌博游戏的情况。

现在让我们揭示第二个秘密：尽管‘康提基’号的机载游戏库非常丰富，但在机组人员中最受欢迎的是国际象棋、跳棋、‘角落’和其他传统的8×8标准方形棋盘游戏。

但它们和我们谦逊的‘电子游戏’有什么联系呢？‘最近我有个问题，我想咨询一下，’来自基辅的V. Revutsky写道。‘是否可以使用‘电子计算器B3-34’、‘电子计算器MK-54’、‘电子计算器MK-56’来下棋或解决一些棋题。如果可以的话，请打印出程序。’

正如我们所见，个别读者对PMK的全能产生了不太合理的信念。什么国际象棋！什么跳棋！总的来说，任何在棋盘上的战略游戏对于任何一个至少见过一次B3-34（MK-54）的人来说都会显得荒谬。

光是64个格子——你怎么可能全记住？还有棋子呢？还有如何制定有意义的策略？随机地？随便写写，随便走走——我们的不败之地在哪里？是这样吗？但不要激动。我们不如再看看另一封信——来自我们常驻记者，白俄罗斯国立大学一年级学生Dmitry Kaikov的信。‘现在我想告诉你们关于我的另一个‘思考’程序。有一个游戏——用三四个跳棋将对手的一个跳棋逼到棋盘的边缘，使它无法移动（‘狼’捕捉‘灰色的小山羊’）。‘小山羊’（由计算器控制的白色跳棋）可以向前或向后移动（沿着黑色格子），而‘狼’（由人控制）只能向前移动。没有人可以吃子或跳过跳棋。计算器试图突破‘狼’的阵型，而它们，如前所述，试图将其诱入陷阱。”

```
00.КПП7 01.КИП8 02.5 03.0 04.- 05.Fx<0 О6.19 
07.КППА 08.КИП8 09.2 10.0 11.- 12.Fx≥0 13.28 
14.КППВ 15.КППС 16.КППД 17.ИП9 18.Кх<07 
19.КППВ 20.КИП8 21.8 22.0 23.- 24.Fx<0 25.16 
26.КППА 27.КППД 28.КППС 29.БП 30.17 31.КИП8 
32.1 33.1 34.+ 35.ИП9 36.Fx<0 37.41 38.XY 
39.П5(6) 40.XY 41.XY 42.4(5) 43.П0 44.XY 
45.↑ 46.↑ 47.КИП↑ 48.- 49.Fx≠0 50.97 51.Fo 
52.FL0 53.47 54.5(6) 55.П8 56.ИП9 57.1 58.+ 
59.П9 60.Fx≠0 61.01 62.ИП5(6) 63.П4(5) 
64.С/П 65.П9 66.С/П 67.КП9 68.КБП0 69.КИП8 
70.9 71.- 72.БП 73.35 74.КИП8 75.9 76.+ 
77.ИП9 78.Fх<0 79.41 80.Fo 81.2 82./-/ 
83.П9 84.БП 85.38 86.КИП8 87.1 88.1 89.- 
90.БП 91.77 92.4(5) 93.П8 94.1 95./-/ 96.П9 
97.В/О
```

![](http://epizodyspace.ru/bibl/tehnika_-_molodyoji/1986/8/45-2.jpg)

这是使用B3-34语言编写的游戏程序。

首先，我们将三个黑色的跳棋进行编号，并在棋盘上（沿着横向）用数字替换字母，就像在图中显示的那样。

现在，每个方格对应一个两位数：	

-	第一个数字代表横向坐标，	
-	第二个数字代表纵向坐标。	

让“狼”在起始位置占据28、48和68号方格（这是通过命令28 П1 48 П2 68 П3设定的），而“小山羊”占据31号位置（31 П4）。

在游戏中，这些寄存器将用来存储跳棋当前的坐标。

在游戏开始之前，需要在某些寄存器中输入跳转地址：92 П7 31 ПА 69 ПВ 74 ПС 86 ПД。

“小山羊”先行。按下В/О С/П键。35秒后，指示器上显示42——PMK将他的跳棋移动到了这个位置。现在轮到我们走棋了。为此，我们需要输入想要移动的跳棋的编号（比如1），然后按下С/П键，接着输入目标方格的编号（假设是37），再次按下С/П键。

计算器记录这个移动，做出响应，然后整个过程重复。这个程序也可以用于四个“狼”。

为此，只需要在地址39、42、54、62、63和92处输入括号中的数字即可。在这种情况下，“狼”的坐标存储在寄存器1-4中，“小山羊”的坐标存储在寄存器5中。必须说明的是，由于程序内存容量有限，计算器最多只能预览两步的走法，因此有时候行动可能“不太合逻辑”。

但即便如此，即使是我也从未赢过它。（显然，在3:1的情况下；如果是四个“狼”，赢得比赛并不难。——M. П.）

程序的工作方式是这样的：程序设定白棋总是倾向于保持在棋盘的轴线位置（在第4和第5纵列之间）。

首先确定“小山羊”位于棋盘的哪一半（地址01-06）。如果在左侧——控制权就会转移到起始地址为07的程序段；如果在右侧——则转移到地址19。

是的，在这之前，寄存器8会自动记录一个数字4，寄存器9会记录一个数字1并带有负号（地址00, 92-97）。

用于执行向前右、向前左、向后右和向后左移动的子程序分别是ППА、ППВ、ППС和ППД（它们的首个指令地址存储在寄存器А、В、С和Д中）。

在给出的例子中，首先是ППА生效：计算器“在脑海中”执行向前右的移动，并将结果存入寄存器5。从地址42开始，程序会查询“狼”和“小山羊”的坐标（寄存器4-1）。如果其中之一的位置与寄存器5中的内容相匹配，那么这个移动就不可能实现，В/О将被激活，计算器随后将通过下一个子程序来考虑另一种走法。如果路径畅通无阻，那么寄存器8和9将会进行重新编码（片段54-59），接着跳转到地址01。

现在“电子计算器”开始进一步思考：它会不会走进陷阱？为此进行检查——是否存在至少一个出路，如果它做出计划的移动，它就能摆脱那个位置。这是通过相同的算法进行的。如果至少找到一个相邻的空格，"小山羊"在必要时可以溜进去，那么PMK将前往记录在寄存器5中的坐标字段（片段56-59和60-64）。

顺便说一句，现在清楚了，为什么要检查“小山羊”本身的坐标——毕竟在第二步之后，它会占据其中一个可能的格子。如果没有空格，那么寄存器8和9将再次输入原始数字，计算器将开始考虑另一个格子。

程序中有地址为08-13和20-25的限制性（不知道还能怎么称呼它们）“区域”，它们确保“小山羊”不会走出棋盘的右侧和左侧边界。如果PMK不能向前走，那么轮到子程序PPS（起始地址74）和PPD（86）。

现在，“电子计算器”会立即进入那个空格，只要它是空的。这是片段77-85提供的“工作时间35-150秒”。

D. Kaikov的程序（顺便说一句，玩起来非常有趣：给人一种印象，好像“小山羊”的行动是由一个深思熟虑、谨慎的对手指导的），可能比我们之前处理的那些要复杂一些。

这主要是因为广泛使用了间接寻址。这主要是为了节省程序内存：例如，命令КППА等同于一对ПП 31（寄存器A中存储数字31）。记录在地址68的命令КБП0等同于БП 00：当控制转移到它时，寄存器0中有一个单位，而在间接寻址中它被修改：1 - 1 = 0，自然法则！

最后，地址47处记录了一个“非标准”（对于B3-34来说）命令КИПЕ：在这种情况下，它的作用与“动画片”程序中的完全相同（有关此的说明，请参见《TM》第4期）。

顺便说一句，正是因为这个命令，D. Kaikov的程序以目前的形式不适用于直接在PMK“电子MK-61”上使用——我们知道，在这个型号中，寄存器0和E之间的连接被切断了。

当然，MK-61的能力要大得多，但是……“我们联系您是因为在使用MK-61时遇到了困难，”例如，来自扎波罗热的R. Maryanov和A. Yalansky写道。“在这个型号中引入了寄存器E，这使得使用为以前型号编写的程序变得困难。

特别是，在使用‘小镇’程序（《科学与生活》第4期）时，我们遇到了计算器拒绝工作的事实。（信中接着提供了程序的一个片段。——M. P.）我们认为错误发生在步骤02-04。我们使用了您杂志上的建议来建立寄存器E和0之间的人造联系，但没有得到预期的结果。”

提醒一下：在我们的建议中说，建立这样的联系至少需要两个ИП0 ПЕ 命令。在某些情况下，这确实足够了。但通常为了正常工作，还需要恢复堆栈。通常，为此只需要一个紧接着两个给出的命令的圆周传送命令（代码25）。有时（如在D. Kaikov的程序中），可以使用XY命令。

幸运的是，在所提供的游戏中有“内部储备”；换句话说，可以缩短几个命令的程序。这允许提供一个同样适用于B3-34和MK-61的版本。需要将地址为45-66的部分替换为以下内容：

```
45.ИП0 46.ПЕ 47.XY 48.КИПЕ 
49.- 50.Fx≠0 51.97 52.FВх 53.+ 
54.FL0 55.45 56.5(6) 57.П8 58.ИП9 
59.1 60.+ 61.П9 62.Кx≠0Е 
63.ИП5(6) 64.П4(5) 65.С/П 66.П9 
```

只是改变了输入下一步的方法。现在需要输入跳棋的编号，然后是 ПП 和字段编号。不过，这种输入方式我们已经在过去的程序中很熟悉了。B3-34（MK-54）的用户应该记住，在他们的键盘上，地址46、48、62对应的字母 E 相当于向上箭头。

括号中的数字，像以前一样，提供“4狼变体”。

部门顾问——苏联英雄，苏联宇航员飞行员尤里·尼古拉耶维奇·格拉兹科夫

米哈伊尔·普霍夫

#	“南方之旅”的算法体操

这次的话题不是去南方，而是前往“南方”——轨道站“尤里·加加林”。许多КЭИ的成员借助可编程微计算器和我们杂志的编号，得以访问月球这个奇异的卫星，不仅欣赏了壮观的600米月球鹰的跳跃，还亲自尝试了太空“杂技”。然而，首先需要对接到空间站，这一操作不亚于着陆的复杂性。因此，今天我们将研究OS-2程序的框图，该程序模拟了宇宙飞船在圆柱形轨道站附近的机动，其中轨道站的纵轴与当地垂直线重合，而着陆平台则设置在圆柱体的两端。对于首次接触算法体操的人来说，建议先熟悉之前的版本（参见今年《TM》第5-7期）。而对于我们的常客来说，理解程序的结构自然是轻而易举的。首先我们看到输入-输出模块。它们的用途不言自明。接下来是同样熟悉的计算模块，这里确定了反作用加速度并计算了每次机动后的当前坐标值。提醒一下，在我们的问题中，坐标系与空间站相关联，Y轴沿当地垂直方向，X轴沿着空间站轨迹的切线方向（见图）。由于着陆平台位于圆柱体的基座上，因此对接条件呈现为|y|=R，且|x|<r。（当然，在会合时刻的速度也不能忘记——因为它决定了对接的“柔和度”。）

![M. Korshunov的跳跃和使用背包发动机绕行“南站”（根据参与者V. Ladokhin的草图由E. Katyshev绘制的图画）。](http://epizodyspace.ru/bibl/tehnika_-_molodyoji/1986/8/45.jpg)

M. Korshunov的跳跃和使用背包发动机绕行“南站”（根据参与者V. Ladokhin的草图由E. Katyshev绘制的图画）。

![](http://epizodyspace.ru/bibl/tehnika_-_molodyoji/1986/8/46.jpg)

![](http://epizodyspace.ru/bibl/tehnika_-_molodyoji/1986/8/47.jpg)

就像在上次的课程中一样，我们今天也将讨论检查和校正模块。正是这些构成了游戏程序的“特色”，因此，像往常一样，我们将更详细地探讨它们的工作原理。通常在最后一次机动时无法做到绝对精确的对接。计算出的坐标值通常位于空间站内部。事故？不，你在指示器上看到的不是错误信号，我们的机载计算机将纠正飞行员的操作。它的工作原理如下：通过检查确定坐标值，得知登月舱“撞到了”空间站，计算器开始将其从中提取出来，并变成了一种特殊的“时间机器”。计算“后退步”的持续时间，设备沿着自己的轨迹返回。机载计算机在其他程序中也以类似的方式工作，但今天我们将介绍一个新的算法。第一种情况是我们从空间站的侧面飞近，但由于最后一次机动，设备最终处于“南端”。现在PMK会做什么呢？首先，它确定到圆柱体基座的距离，然后将其除以设备在终点处的速度，从而找到“后退步”的时间。然后，像往常一样，登月舱沿着原来的轨迹返回。算法的几何意义如图所示——宇宙飞船所在的点被当作中心，画出一个圆，其半径正好等于到端部的距离。圆与轨迹的交点就是设备的新位置。这样，几步之后，机载计算机就将“康提基”号带到了着陆场。如果我们从侧面接近空间站，那么应用同样的校正方法会得到完全不同的结果。让我们来看图。可以清楚地看到，圆与轨迹的交点现在位于空间站外部，飞船似乎被从空间站向后抛出。正是这个“流星防护”的效应，“康提基”号的英勇乘员遇到了。我们希望我们的读者在开发自己的游戏时能够轻松模拟作家们喜爱的“力场”。最后，让我们简单谈谈变量计算模块。值得注意的是，在这里使用的不是像在“登月舱”程序中那样精确的运动方程解，而是近似解。它们是通过所谓的线性化得到的。关于这是什么，我们将在接下来的专栏中讨论。

谢尔盖·沃尔科夫，工程师

